---
import BaseLayout from "../layouts/base.astro";
import { App } from "../csr/app";

// Disable prerendering for this page in case you don't need dynamic server-side state
// transferred to the client
export const prerender = false;

Astro.locals.APP_PROPS = null; /*{
  user: {
    name: "John Doe",
    email: "john.doe@example.com",
    uid: "user-123",
  },
};*/
---

<!-- This script exposes the app props to the client-side -->
<script
	id="app-props"
	data-props={JSON.stringify(Astro.locals.APP_PROPS)}
	is:inline
>
	const appData = document
		.getElementById("app-props")
		?.getAttribute("data-props");
	// see env.d.ts for types; relatively save to expose globals like this
	// as long as you don't expose any secrets or sensitive data - APP_PROPS is unlikely to be spec'ed by W3C
	window.$APP_PROPS = appData ? JSON.parse(appData) : null;
</script>

<BaseLayout title="Astro + defuss Admin UI Demo">
	<App client:only />
</BaseLayout>
