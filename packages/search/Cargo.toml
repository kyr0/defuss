[package]
name = "defuss-search"
version = "0.0.1"
edition = "2021"
publish = false
description = "Hybrid Text & Vector Search"
license = "MIT"
authors = ["Aron Homberg <info@aron-homberg.de>"]
keywords = [
    "search",
    "wasm",
    "multicore",
    "rust",
    "javascript",
    "typescript",
    "webassembly",
    "browser",
    "web-workers"
  ]
repository = "https://github.com/kyr0/defuss"

[lib]
crate-type = ["cdylib"]

[dependencies]
wasm-bindgen = "0.2"
wasm-bindgen-rayon = "1.2"
wasm-bindgen-futures = "0.4"
rayon = "1.8"
console_error_panic_hook = "0.1.2"
web-sys = { version = "0.3", features = [
  'console',
  'Performance'
] }
js-sys = { version = "0.3" }
gloo-timers =  { version = "0.3", features = ["futures"] }

# Search engine dependencies
stop-words = "0.8"
rust-stemmers = "1.2"
lru = "0.12"
ordered-float = "4.2"
regex = "1.10"
# bson = "2.15.0"  # Temporarily disabled to avoid getrandom conflicts
base64 = "0.22"

[dev-dependencies]
wasmprinter = "0.2"

# Force correct getrandom version for WASM compatibility
[dependencies.getrandom]
version = "0.2"
features = ["js"]

[profile.release]
# Tell `rustc` to optimize for performance
opt-level = 3 # Optimize for speed
lto = true # Link Time Optimization
codegen-units = 1 # Reduce the number of codegen units to improve inlining and optimizations